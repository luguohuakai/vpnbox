<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta name="format-detection" content="email=no">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
    <!--<link rel="stylesheet" type="text/css" href="dist/antui.min.css" media="all">-->
    <!-- 主文件 -->
    <link rel="stylesheet" href="https://a.alipayobjects.com/g/antui/antui/10.0.18/dpl/antui.css"/>
    <!-- 组件 -->
    <link rel="stylesheet"
          href="https://a.alipayobjects.com/g/antui/antui/10.0.18/dpl/??widget/message.css,widget/loading.css,widget/switch.css,widget/card.css,icon/message.css,widget/notice.css,widget/page-result.css,widget/toast.css"/>

    <!-- js -->
    <script charset="utf-8" src="__JS__/jquery.min.js"></script>
    <script charset="utf-8" src="__JS__/common.js"></script>
    <script src="https://a.alipayobjects.com/g/antui/antui/10.0.18/antui.js"></script>
    <title>欢迎使用深澜 SRUNBOX</title>

</head>
<body>
<div class="widget-demo-show-panel" style="display: block">
    <div class="demo demo-list">
        <div class="am-list">
            <div class="am-list-body">
                <div class="am-list-item">
                    <div class="am-list-content">是否重新启用VPN</div>
                    <button class="am-button tiny-blue" id="able">重启</button>
                    <!--<div class="am-switch">-->
                        <!--<input type="checkbox" name="is_enable" id="is_enable" class="am-switch-checkbox">-->
                        <!--<label class="am-switch-label">-->
                            <!--<div class="am-switch-inner"></div>-->
                            <!--<div class="am-switch-switch"></div>-->
                        <!--</label>-->
                    <!--</div>-->
                </div>
            </div>
        </div>
        <div class="am-list">
            <div class="am-list-header" id="list-header-2" style="font-size: 16px;">查看VPN的详细信息</div>
            <div class="am-list-body" aria-labelledby="list-header-1">
                <div >
                    <div class="am-list-item">
                        <div class="am-list-content">可用server</div>
                        <div class="am-list-extra" id="all_server"></div>
                    </div>
                    <div class="select">
                        <ul id="ul">

                        </ul>
                    </div>
                </div>
                <div class="am-list-item">
                    <div class="am-list-content">当前server</div>
                    <div class="am-list-extra" id="current_server"></div>
                </div>
                <div>
                    <div class="am-list-item">
                        <div class="am-list-content">可用网段</div>
                        <div class="am-list-extra" id="Available_network"></div>
                    </div>
                    <ul id="oul">

                    </ul>
                </div>
                <div class="am-list-item">
                    <div class="am-list-content">当前网段</div>
                    <div class="am-list-extra" id="current_network"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

    $(function () {
        $.post(
            "__INCLUDE__/proxy.php",
            {interface:'v2/get-vpn-detail'},
            function (e) {
                console.log(e);
                if(e.code === 200){
                    toast_show(e.msg,'success');
                    $('#current_server').html(e.current_server);
                    $('#current_network').html(e.current_work_lan);
                    $.each(e.all_server,function(index,value){
                        new_obj = $("<li>value<>");
                        $('#ul').append(new_obj);
                        console.log("下标:"+index+"值:"+value);
                    });
                    $.each(e.all_work_lan,function(index,value){
                        new_obj1 = $("<li>value<>");
                        $('#oul').append(new_obj1);
                        console.log("下标:"+index+"值:"+value);
                    });
                    /*   for(var i=0;i<e.all_server.length;i++){
                           var oli=document.createElement('li');
                           oli.innerHTML+='<p>'+e.all_server[i]+'</p>';
                           alert(e.all_server[i]);
                           ul.appendChild(oli);
                       }*/
                    /*  for(var j=0;j<e.all_work_lan.length;j++){
                          var oli1=document.createElement('li');
                          oli1.innerHTML+='<p>'+e.all_work_lan[j]+'</p>';
                          alert(e.all_work_lan[j]);
                          oul.appendChild(oli1);
                      }*/
                }else {
                    toast_show(e.msg);
                }
            },'json'
        );

       $('#able').click(function () {
           post(
               'v2/re-connect-vpn',
               {user_name: SS('user_name')},
               function (e) {
                   console.log(e);
                    toast_hide();
                    if(e.code === 200){
                       toast_show(e.msg);
                   }
                   if (e.code !== 4000) {
                       stop = true;
                        return false;
                   }
               },false
           );
        });
    })
</script>
</body>
</html>